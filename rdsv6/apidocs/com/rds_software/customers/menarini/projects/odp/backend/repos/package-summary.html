<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc (1.8.0_432) on Fri Nov 14 14:30:58 CET 2025 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>com.rds_software.customers.menarini.projects.odp.backend.repos (rdsv6 1.0-SNAPSHOT API)</title>
<meta name="date" content="2025-11-14">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.rds_software.customers.menarini.projects.odp.backend.repos (rdsv6 1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?com/rds_software/customers/menarini/projects/odp/backend/repos/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.rds_software.customers.menarini.projects.odp.backend.repos</h1>
<div class="docSummary">
<div class="block">Data access layer for ODP persistence.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/IOdpRepository.html" title="interface in com.rds_software.customers.menarini.projects.odp.backend.repos">IOdpRepository</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/IOdpRepositoryType.html" title="enum in com.rds_software.customers.menarini.projects.odp.backend.repos">IOdpRepositoryType</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package com.rds_software.customers.menarini.projects.odp.backend.repos Description">Package com.rds_software.customers.menarini.projects.odp.backend.repos Description</h2>
<div class="block">Data access layer for ODP persistence.

 <h2>Overview</h2>
 <p>
 This package defines the repository abstraction for ODP data access and provides
 implementations for different storage backends. The repository pattern separates
 data access logic from business logic, enabling flexible storage solutions.
 </p>

 <h2>Core Components</h2>

 <h3>IOdpRepository</h3>
 <p>
 <a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/IOdpRepository.html" title="interface in com.rds_software.customers.menarini.projects.odp.backend.repos"><code>IOdpRepository</code></a>
 is the main repository interface providing:
 </p>
 <ul>
 <li><b>CRUD Operations</b> - Create, read, update, delete ODPs</li>
 <li><b>Search Operations</b> - Search and count ODPs with filtering</li>
 <li><b>Authorization Flow</b> - Manage approval steps and state transitions</li>
 <li><b>Reference Data</b> - Access companies, currencies, suppliers, etc.</li>
 <li><b>User Management</b> - Retrieve user-role mappings</li>
 <li><b>Password Validation</b> - Authenticate users for approvals</li>
 </ul>

 <h3>IOdpRepositoryType</h3>
 <p>
 <a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/IOdpRepositoryType.html" title="enum in com.rds_software.customers.menarini.projects.odp.backend.repos"><code>IOdpRepositoryType</code></a>
 enum defines available repository implementations:
 </p>
 <ul>
 <li><b>CSV</b> - File-based CSV storage (current implementation)</li>
 <li><b>RDBMS</b> - Relational database storage (future implementation)</li>
 </ul>

 <h2>Implementations</h2>

 <h3>CSV Implementation</h3>
 <p>
 The <a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/package-summary.html"><code>com.rds_software.customers.menarini.projects.odp.backend.repos.csv</code></a> subpackage
 provides a CSV file-based repository implementation:
 </p>
 <ul>
 <li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/CsvOdpRepository.html" title="class in com.rds_software.customers.menarini.projects.odp.backend.repos.csv"><code>CsvOdpRepository</code></a> -
     Main repository implementation</li>
 <li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/CsvOdpFileManager.html" title="class in com.rds_software.customers.menarini.projects.odp.backend.repos.csv"><code>CsvOdpFileManager</code></a> -
     File I/O operations</li>
 <li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/CsvOdpMapper.html" title="class in com.rds_software.customers.menarini.projects.odp.backend.repos.csv"><code>CsvOdpMapper</code></a> -
     CSV â†” Domain model mapping</li>
 </ul>

 <h2>Repository Pattern Benefits</h2>

 <h3>Abstraction</h3>
 <p>
 The service layer depends only on the IOdpRepository interface, not on specific
 implementations. This allows:
 </p>
 <ul>
 <li>Switching storage backends without changing business logic</li>
 <li>Testing with mock repositories</li>
 <li>Runtime selection of repository type</li>
 </ul>

 <h3>Separation of Concerns</h3>
 <p>
 Data access logic is isolated from:
 </p>
 <ul>
 <li>Business logic and validation (service layer)</li>
 <li>Presentation logic (frontend layer)</li>
 <li>Authorization and security (enforced at service layer)</li>
 </ul>

 <h2>Key Operations</h2>

 <h3>CRUD Operations</h3>
 <ul>
 <li><code>createOdp(Odp)</code> - Persist new ODP, return generated ID</li>
 <li><code>findOdpById(String)</code> - Retrieve ODP by ID</li>
 <li><code>updateOdp(Odp)</code> - Update existing ODP</li>
 <li><code>deleteOdp(String)</code> - Remove ODP from storage</li>
 </ul>

 <h3>Search Operations</h3>
 <ul>
 <li><code>searchOdps(criteria, sort, from, rows)</code> - Search with pagination and sorting</li>
 <li><code>countOdps(criteria)</code> - Count matching ODPs</li>
 </ul>

 <h3>Authorization Workflow</h3>
 <ul>
 <li><code>nextApprover(Odp)</code> - Determine next approver in workflow</li>
 <li><code>addAuthorizationStep(id, password, step)</code> - Add approval/rejection step</li>
 <li><code>retrieveAuthorizationFlow(id)</code> - Get complete approval history</li>
 <li><code>validatePassword(userId, password)</code> - Authenticate user</li>
 </ul>

 <h3>Reference Data</h3>
 <ul>
 <li><code>retrieveCompanies()</code> / <code>retrieveCompanies(user)</code> - Get companies</li>
 <li><code>retrieveCurrencies(company)</code> - Get currencies for company</li>
 <li><code>retrieveSuppliers(company)</code> - Get suppliers for company</li>
 <li><code>retrieveCDCs(company)</code> - Get cost centers for company</li>
 <li><code>retrieveCDRs(company)</code> - Get revenue centers for company</li>
 <li><code>retrieveAccountVDS(company)</code> - Get accounts for company</li>
 <li><code>findXxxById(id, company)</code> - Find specific reference entity</li>
 </ul>

 <h3>User Management</h3>
 <ul>
 <li><code>retrieveOdpUser(userId)</code> - Get user with role</li>
 </ul>

 <h2>Implementation Notes</h2>

 <h3>Transaction Management</h3>
 <p>
 Repository implementations should handle atomic operations:
 </p>
 <ul>
 <li><code>addAuthorizationStep</code> must atomically add approval step and update ODP state/assignee</li>
 <li>Multi-file operations should ensure consistency</li>
 </ul>

 <h3>Error Handling</h3>
 <p>
 Repositories throw:
 </p>
 <ul>
 <li><code>IllegalArgumentException</code> - For not found entities or invalid parameters</li>
 <li><code>RuntimeException</code> - For I/O errors or data corruption</li>
 </ul>

 <h3>ID Generation</h3>
 <p>
 The repository is responsible for generating unique IDs when creating new ODPs.
 </p>

 <h2>Usage Example</h2>

 <h3>Direct Repository Usage</h3>
 <pre><code>
 // Typically used by service layer, not directly by frontend
 IOdpRepository repo = ...; // from service.getIOdpRepository()

 // CRUD
 String id = repo.createOdp(odp);
 Odp retrieved = repo.findOdpById(id);
 repo.updateOdp(odp);
 repo.deleteOdp(id);

 // Search
 List&lt;Odp&gt; results = repo.searchOdps(criteria, sort, 0, 50);
 int count = repo.countOdps(criteria);

 // Authorization
 OdpUser nextApprover = repo.nextApprover(odp);
 boolean approved = repo.addAuthorizationStep(id, password, step);
 OdpAuthorizationFlow flow = repo.retrieveAuthorizationFlow(id);

 // Reference data
 List&lt;OdpCompany&gt; companies = repo.retrieveCompanies();
 List&lt;OdpCurrency&gt; currencies = repo.retrieveCurrencies(company);
 </code></pre>

 <h3>Service Layer Integration</h3>
 <pre><code>
 // Service delegates to repository
 public class OdpService implements IOdpService {
     private IOdpRepository repository;

     public String createOdp(Odp odp, String userId) {
         // Service layer adds validation and authorization
         validateUserRole(userId, RoleType::canCreate);
         validateOdpFields(odp);

         // Delegate to repository for persistence
         return repository.createOdp(odp);
     }
 }
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>3.0</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>RDS Software</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/services/IOdpService.html" title="interface in com.rds_software.customers.menarini.projects.odp.backend.services"><code>IOdpService</code></a>, 
<a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/package-summary.html"><code>com.rds_software.customers.menarini.projects.odp.backend.repos.csv</code></a></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../../../../com/rds_software/customers/menarini/projects/odp/backend/repos/csv/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?com/rds_software/customers/menarini/projects/odp/backend/repos/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</body>
</html>
